(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var mountNode = document.getElementById('cardsContainer');

var Row = ReactBootstrap.Row;
var Col = ReactBootstrap.Col;
var Button = ReactBootstrap.Button;
var ButtonToolbar = ReactBootstrap.ButtonToolbar;
var Well = ReactBootstrap.Well;

var TagContainer = React.createClass({displayName: "TagContainer",
    render: function () {
        var tagNodes = this.props.tags.map(function (tag) {
            return (
                React.createElement(Tag, {key: tag.Id, onTagClick: this.props.onTagClick.bind(null, tag.Id), tagName: tag.Name})
            );
        }.bind(this));
        return (
            React.createElement("div", {className: "container tagContainer"}, 
                React.createElement(Well, null, 
                    React.createElement(ButtonToolbar, null, 
                        React.createElement(Button, {bsStyle: "primary", onClick: this.props.onTagClick.bind(null,null)}, "Reset"), tagNodes
                    )
                )
            )
        );
    }
});

var Tag = React.createClass({displayName: "Tag",
    render: function () {
        return (
            React.createElement(Button, {className: "tag", onClick: this.props.onTagClick}, this.props.tagName)
        );
    }
});

var CardContainer = React.createClass({displayName: "CardContainer",
    render: function () {
        var cardDetail = this.props.cardDetail;
        if (cardDetail != null) {
            return (
                React.createElement("div", {className: "container cardContainer"}, 
                    React.createElement(Row, null, 
                        React.createElement(CardDetail, {title: cardDetail.Title, createdDate: cardDetail.CreatedDate, content: cardDetail.Content})
                    )
                )
            );
        } else {
            var cardNodes = this.props.cards.map(function (card) {
                return (
                    React.createElement(Card, {key: card.Id, title: card.Title, summary: card.Summary, createdDate: card.CreatedDate, tags: card.Tags, onTagClick: this.props.onTagClick, onCardClick: this.props.onCardClick.bind(null,card.Id)})
                );
            }.bind(this));
            return (
                React.createElement("div", {className: "container cardContainer"}, 
                    React.createElement(Row, null, 
                        cardNodes
                    )
                )
            );
        }
    }
});

var Card = React.createClass({displayName: "Card",
    render: function () {
        return (
            React.createElement(Col, {xs: 12, md: 6}, 
                React.createElement("div", {className: "card"}, 
                    React.createElement("div", {className: "card-header clickable", onClick: this.props.onCardClick}, 
                        React.createElement("h3", {className: "card-header-title"}, this.props.title), 
                        React.createElement("span", {className: "card-header-date"}, this.props.createdDate)
                    ), 
                    React.createElement("div", {className: "card-summary"}, 
                        React.createElement("p", null, this.props.summary)
                    ), 
                    React.createElement(MiniTagContainer, {tags: this.props.tags, onTagClick: this.props.onTagClick})
                )
            )
        );
    }
});

var CardDetail = React.createClass({displayName: "CardDetail",
    render: function () {
        var content = { __html: this.props.content };
        return (
            React.createElement(Col, {xs: 12}, 
                React.createElement("div", {className: "card"}, 
                    React.createElement("div", {className: "card-header"}, 
                        React.createElement("h3", {className: "card-header-title"}, this.props.title), 
                        React.createElement("span", {className: "card-header-date"}, this.props.createdDate)
                    ), 
                    React.createElement("div", {className: "card-content"}, 
                        React.createElement("div", {dangerouslySetInnerHTML: content})
                    )
                )
            )
        );
    }
});

var MiniTagContainer = React.createClass({displayName: "MiniTagContainer",
    render: function () {
        var tagNodes = this.props.tags.map(function (tag) {
            return (
                React.createElement(MiniTag, {key: tag.Id, onTagClick: this.props.onTagClick.bind(null, tag.Id), tagName: tag.Name})
            );
        }.bind(this));
        return (
            React.createElement("div", {className: "container miniTagContainer"}, 
                React.createElement(ButtonToolbar, null, 
                    tagNodes
                )
            )
        );
    }
});

var MiniTag = React.createClass({displayName: "MiniTag",
    render: function () {
        return (
            React.createElement(Button, {className: "miniTag", bsSize: "xsmall", onClick: this.props.onTagClick}, this.props.tagName)
        );
    }
});

var PageContainer = React.createClass({displayName: "PageContainer",
    loadFromServer: function (stateProp, apiUrl) {
        var xhr = new XMLHttpRequest();
        xhr.open("get", apiUrl, true);
        xhr.onload = function () {
            var data = JSON.parse(xhr.responseText);
            var stateObject = function () {
                returnObj = {};
                returnObj[stateProp] = data;
                return returnObj;
            };
            this.setState(stateObject);
        }.bind(this);
        xhr.send();
    },
    getInitialState: function () {
        return {
            cards: [],
            cardDetail: null,
            tags: []
        };
    },
    componentDidMount: function () {
        this.loadFromServer("tags", "api/tags");
        this.loadFromServer("cards", "api/cards");
    },
    handleTagClick: function (tagId) {
        var qry = "";
        if (tagId != null) qry = "?tagId=" + tagId;
        this.setState({ cardDetail: null })
        this.loadFromServer("cards", "api/cards" + qry);
    },
    handleCardClick: function (cardId) {
        var apiUrl = "api/cards/" + cardId;
        this.loadFromServer("cardDetail", apiUrl);
    },
    render: function () {
        return (
            React.createElement("div", {className: "pageContainer"}, 
                React.createElement(TagContainer, {onTagClick: this.handleTagClick, tags: this.state.tags}), 
                React.createElement(CardContainer, {onTagClick: this.handleTagClick, onCardClick: this.handleCardClick, cards: this.state.cards, cardDetail: this.state.cardDetail})
            )
        );
    }
});

ReactDOM.render(
    React.createElement(PageContainer, null),
    mountNode
);
},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJDOlxcVXNlcnNcXGFtZWllcjAxNFxcRG9jdW1lbnRzXFxSZXBvc1xccmVwby1yZWFjdC1jYXJkc1xcUmVhY3RDYXJkc1xcc3JjXFxSZWFjdENhcmRzXFx3d3dyb290XFxqc1xcanN4XFxQYWdlQ29udGFpbmVyLmpzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBLENBQUMsSUFBSSxTQUFTLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDOztBQUUzRCxJQUFJLEdBQUcsR0FBRyxjQUFjLENBQUMsR0FBRyxDQUFDO0FBQzdCLElBQUksR0FBRyxHQUFHLGNBQWMsQ0FBQyxHQUFHLENBQUM7QUFDN0IsSUFBSSxNQUFNLEdBQUcsY0FBYyxDQUFDLE1BQU0sQ0FBQztBQUNuQyxJQUFJLGFBQWEsR0FBRyxjQUFjLENBQUMsYUFBYSxDQUFDO0FBQ2pELElBQUksSUFBSSxHQUFHLGNBQWMsQ0FBQyxJQUFJLENBQUM7O0FBRS9CLElBQUksa0NBQWtDLDRCQUFBO0lBQ2xDLE1BQU0sRUFBRSxZQUFZO1FBQ2hCLElBQUksUUFBUSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFVLEdBQUcsRUFBRTtZQUM5QztnQkFDSSxvQkFBQyxHQUFHLEVBQUEsQ0FBQSxDQUFDLEdBQUEsRUFBRyxDQUFFLEdBQUcsQ0FBQyxFQUFFLEVBQUMsQ0FBQyxVQUFBLEVBQVUsQ0FBRSxJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBQyxDQUFDLE9BQUEsRUFBTyxDQUFFLEdBQUcsQ0FBQyxJQUFLLENBQUEsQ0FBRyxDQUFBO2NBQy9GO1NBQ0wsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUNk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RUFBQTtnQkFDeEUsb0JBQUMsYUFBYSxFQUFBLENBQUEsQ0FBQyxVQUFBLEVBQVUsQ0FBRSxJQUFJLENBQUMsY0FBYyxFQUFDLENBQUMsV0FBQSxFQUFXLENBQUUsSUFBSSxDQUFDLGVBQWUsRUFBQyxDQUFDLEtBQUEsRUFBSyxDQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFDLENBQUMsVUFBQSxFQUFVLENBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFXLENBQUEsQ0FBRyxDQUFBO1lBQy9JLENBQUE7VUFDUjtLQUNMO0FBQ0wsQ0FBQyxDQUFDLENBQUM7O0FBRUgsUUFBUSxDQUFDLE1BQU07SUFDWCxvQkFBQyxhQUFhLEVBQUEsSUFBQSxDQUFHLENBQUE7SUFDakIsU0FBUztDQUNaLENBQUMiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwi77u/dmFyIG1vdW50Tm9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXJkc0NvbnRhaW5lcicpO1xyXG5cclxudmFyIFJvdyA9IFJlYWN0Qm9vdHN0cmFwLlJvdztcclxudmFyIENvbCA9IFJlYWN0Qm9vdHN0cmFwLkNvbDtcclxudmFyIEJ1dHRvbiA9IFJlYWN0Qm9vdHN0cmFwLkJ1dHRvbjtcclxudmFyIEJ1dHRvblRvb2xiYXIgPSBSZWFjdEJvb3RzdHJhcC5CdXR0b25Ub29sYmFyO1xyXG52YXIgV2VsbCA9IFJlYWN0Qm9vdHN0cmFwLldlbGw7XHJcblxyXG52YXIgVGFnQ29udGFpbmVyID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xyXG4gICAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHRhZ05vZGVzID0gdGhpcy5wcm9wcy50YWdzLm1hcChmdW5jdGlvbiAodGFnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICA8VGFnIGtleT17dGFnLklkfSBvblRhZ0NsaWNrPXt0aGlzLnByb3BzLm9uVGFnQ2xpY2suYmluZChudWxsLCB0YWcuSWQpfSB0YWdOYW1lPXt0YWcuTmFtZX0gLz5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGFpbmVyIHRhZ0NvbnRhaW5lclwiPlxyXG4gICAgICAgICAgICAgICAgPFdlbGw+XHJcbiAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblRvb2xiYXI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gYnNTdHlsZT1cInByaW1hcnlcIiBvbkNsaWNrPXt0aGlzLnByb3BzLm9uVGFnQ2xpY2suYmluZChudWxsLG51bGwpfT5SZXNldDwvQnV0dG9uPnt0YWdOb2Rlc31cclxuICAgICAgICAgICAgICAgICAgICA8L0J1dHRvblRvb2xiYXI+XHJcbiAgICAgICAgICAgICAgICA8L1dlbGw+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxudmFyIFRhZyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcclxuICAgIHJlbmRlcjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxCdXR0b24gY2xhc3NOYW1lPVwidGFnXCIgb25DbGljaz17dGhpcy5wcm9wcy5vblRhZ0NsaWNrfT57dGhpcy5wcm9wcy50YWdOYW1lfTwvQnV0dG9uPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxudmFyIENhcmRDb250YWluZXIgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XHJcbiAgICByZW5kZXI6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY2FyZERldGFpbCA9IHRoaXMucHJvcHMuY2FyZERldGFpbDtcclxuICAgICAgICBpZiAoY2FyZERldGFpbCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRhaW5lciBjYXJkQ29udGFpbmVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPFJvdz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPENhcmREZXRhaWwgdGl0bGU9e2NhcmREZXRhaWwuVGl0bGV9IGNyZWF0ZWREYXRlPXtjYXJkRGV0YWlsLkNyZWF0ZWREYXRlfSBjb250ZW50PXtjYXJkRGV0YWlsLkNvbnRlbnR9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9Sb3c+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgY2FyZE5vZGVzID0gdGhpcy5wcm9wcy5jYXJkcy5tYXAoZnVuY3Rpb24gKGNhcmQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPENhcmQga2V5PXtjYXJkLklkfSB0aXRsZT17Y2FyZC5UaXRsZX0gc3VtbWFyeT17Y2FyZC5TdW1tYXJ5fSBjcmVhdGVkRGF0ZT17Y2FyZC5DcmVhdGVkRGF0ZX0gdGFncz17Y2FyZC5UYWdzfSBvblRhZ0NsaWNrPXt0aGlzLnByb3BzLm9uVGFnQ2xpY2t9IG9uQ2FyZENsaWNrPXt0aGlzLnByb3BzLm9uQ2FyZENsaWNrLmJpbmQobnVsbCxjYXJkLklkKX0gLz5cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRhaW5lciBjYXJkQ29udGFpbmVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPFJvdz5cclxuICAgICAgICAgICAgICAgICAgICAgICAge2NhcmROb2Rlc31cclxuICAgICAgICAgICAgICAgICAgICA8L1Jvdz5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSk7XHJcblxyXG52YXIgQ2FyZCA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcclxuICAgIHJlbmRlcjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxDb2wgeHM9ezEyfSBtZD17Nn0+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmRcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmQtaGVhZGVyIGNsaWNrYWJsZVwiIG9uQ2xpY2s9e3RoaXMucHJvcHMub25DYXJkQ2xpY2t9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwiY2FyZC1oZWFkZXItdGl0bGVcIj57dGhpcy5wcm9wcy50aXRsZX08L2gzPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJjYXJkLWhlYWRlci1kYXRlXCI+e3RoaXMucHJvcHMuY3JlYXRlZERhdGV9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC1zdW1tYXJ5XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwPnt0aGlzLnByb3BzLnN1bW1hcnl9PC9wPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxNaW5pVGFnQ29udGFpbmVyIHRhZ3M9e3RoaXMucHJvcHMudGFnc30gb25UYWdDbGljaz17dGhpcy5wcm9wcy5vblRhZ0NsaWNrfSAvPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvQ29sPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxudmFyIENhcmREZXRhaWwgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XHJcbiAgICByZW5kZXI6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY29udGVudCA9IHsgX19odG1sOiB0aGlzLnByb3BzLmNvbnRlbnQgfTtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8Q29sIHhzPXsxMn0+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmRcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmQtaGVhZGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJjYXJkLWhlYWRlci10aXRsZVwiPnt0aGlzLnByb3BzLnRpdGxlfTwvaDM+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImNhcmQtaGVhZGVyLWRhdGVcIj57dGhpcy5wcm9wcy5jcmVhdGVkRGF0ZX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkLWNvbnRlbnRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBkYW5nZXJvdXNseVNldElubmVySFRNTD17Y29udGVudH0gLz5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L0NvbD5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbnZhciBNaW5pVGFnQ29udGFpbmVyID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xyXG4gICAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHRhZ05vZGVzID0gdGhpcy5wcm9wcy50YWdzLm1hcChmdW5jdGlvbiAodGFnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICA8TWluaVRhZyBrZXk9e3RhZy5JZH0gb25UYWdDbGljaz17dGhpcy5wcm9wcy5vblRhZ0NsaWNrLmJpbmQobnVsbCwgdGFnLklkKX0gdGFnTmFtZT17dGFnLk5hbWV9IC8+XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRhaW5lciBtaW5pVGFnQ29udGFpbmVyXCI+XHJcbiAgICAgICAgICAgICAgICA8QnV0dG9uVG9vbGJhcj5cclxuICAgICAgICAgICAgICAgICAgICB7dGFnTm9kZXN9XHJcbiAgICAgICAgICAgICAgICA8L0J1dHRvblRvb2xiYXI+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxudmFyIE1pbmlUYWcgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XHJcbiAgICByZW5kZXI6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8QnV0dG9uIGNsYXNzTmFtZT1cIm1pbmlUYWdcIiBic1NpemU9XCJ4c21hbGxcIiBvbkNsaWNrPXt0aGlzLnByb3BzLm9uVGFnQ2xpY2t9Pnt0aGlzLnByb3BzLnRhZ05hbWV9PC9CdXR0b24+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufSk7XHJcblxyXG52YXIgUGFnZUNvbnRhaW5lciA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcclxuICAgIGxvYWRGcm9tU2VydmVyOiBmdW5jdGlvbiAoc3RhdGVQcm9wLCBhcGlVcmwpIHtcclxuICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgeGhyLm9wZW4oXCJnZXRcIiwgYXBpVXJsLCB0cnVlKTtcclxuICAgICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgIHZhciBzdGF0ZU9iamVjdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybk9iaiA9IHt9O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuT2JqW3N0YXRlUHJvcF0gPSBkYXRhO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldHVybk9iajtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZU9iamVjdCk7XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHhoci5zZW5kKCk7XHJcbiAgICB9LFxyXG4gICAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgY2FyZHM6IFtdLFxyXG4gICAgICAgICAgICBjYXJkRGV0YWlsOiBudWxsLFxyXG4gICAgICAgICAgICB0YWdzOiBbXVxyXG4gICAgICAgIH07XHJcbiAgICB9LFxyXG4gICAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmxvYWRGcm9tU2VydmVyKFwidGFnc1wiLCBcImFwaS90YWdzXCIpO1xyXG4gICAgICAgIHRoaXMubG9hZEZyb21TZXJ2ZXIoXCJjYXJkc1wiLCBcImFwaS9jYXJkc1wiKTtcclxuICAgIH0sXHJcbiAgICBoYW5kbGVUYWdDbGljazogZnVuY3Rpb24gKHRhZ0lkKSB7XHJcbiAgICAgICAgdmFyIHFyeSA9IFwiXCI7XHJcbiAgICAgICAgaWYgKHRhZ0lkICE9IG51bGwpIHFyeSA9IFwiP3RhZ0lkPVwiICsgdGFnSWQ7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGNhcmREZXRhaWw6IG51bGwgfSlcclxuICAgICAgICB0aGlzLmxvYWRGcm9tU2VydmVyKFwiY2FyZHNcIiwgXCJhcGkvY2FyZHNcIiArIHFyeSk7XHJcbiAgICB9LFxyXG4gICAgaGFuZGxlQ2FyZENsaWNrOiBmdW5jdGlvbiAoY2FyZElkKSB7XHJcbiAgICAgICAgdmFyIGFwaVVybCA9IFwiYXBpL2NhcmRzL1wiICsgY2FyZElkO1xyXG4gICAgICAgIHRoaXMubG9hZEZyb21TZXJ2ZXIoXCJjYXJkRGV0YWlsXCIsIGFwaVVybCk7XHJcbiAgICB9LFxyXG4gICAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYWdlQ29udGFpbmVyXCI+XHJcbiAgICAgICAgICAgICAgICA8VGFnQ29udGFpbmVyIG9uVGFnQ2xpY2s9e3RoaXMuaGFuZGxlVGFnQ2xpY2t9IHRhZ3M9e3RoaXMuc3RhdGUudGFnc30gLz5cclxuICAgICAgICAgICAgICAgIDxDYXJkQ29udGFpbmVyIG9uVGFnQ2xpY2s9e3RoaXMuaGFuZGxlVGFnQ2xpY2t9IG9uQ2FyZENsaWNrPXt0aGlzLmhhbmRsZUNhcmRDbGlja30gY2FyZHM9e3RoaXMuc3RhdGUuY2FyZHN9IGNhcmREZXRhaWw9e3RoaXMuc3RhdGUuY2FyZERldGFpbH0gLz5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufSk7XHJcblxyXG5SZWFjdERPTS5yZW5kZXIoXHJcbiAgICA8UGFnZUNvbnRhaW5lciAvPixcclxuICAgIG1vdW50Tm9kZVxyXG4pO1xyXG4iXX0=
